<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sea Surface Temperature Changes (1979–2023)</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    body {
      margin: 0;
      background-color: #f9f9f9;
      font-family: "Segoe UI", Arial, sans-serif;
      overflow: hidden;
    }
    text {
      font-size: 12px;
    }
    .title {
      font-size: 24px;
      font-weight: bold;
      text-anchor: middle;
    }
    .tooltip {
      position: absolute;
      background: rgba(255, 255, 255, 0.9);
      padding: 8px 12px;
      border: 1px solid #ccc;
      border-radius: 6px;
      pointer-events: none;
      font-size: 14px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    }
  </style>
</head>
<body>

<script>
// === Data ===
const data = [
  { year: 1979, temp: -0.16 }, { year: 1980, temp: -0.59 },
  { year: 1981, temp: -1.11 }, { year: 1982, temp: -0.58 },
  { year: 1983, temp: -0.37 }, { year: 1984, temp: -0.78 },
  { year: 1985, temp: -0.56 }, { year: 1986, temp: -0.96 },
  { year: 1987, temp: -0.61 }, { year: 1988, temp: -0.32 },
  { year: 1989, temp: -0.38 }, { year: 1990, temp: 0.02 },
  { year: 1991, temp: -0.18 }, { year: 1992, temp: -0.44 },
  { year: 1993, temp: -0.67 }, { year: 1994, temp: 0.00 },
  { year: 1995, temp: -0.31 }, { year: 1996, temp: -0.58 },
  { year: 1997, temp: -0.13 }, { year: 1998, temp: 0.56 },
  { year: 1999, temp: 0.27 }, { year: 2000, temp: 0.06 },
  { year: 2001, temp: 0.28 }, { year: 2002, temp: -0.15 },
  { year: 2003, temp: -0.17 }, { year: 2004, temp: 0.11 },
  { year: 2005, temp: -0.13 }, { year: 2006, temp: -0.25 },
  { year: 2007, temp: 0.15 }, { year: 2008, temp: 0.06 },
  { year: 2009, temp: -0.10 }, { year: 2010, temp: 0.17 },
  { year: 2011, temp: -0.39 }, { year: 2012, temp: -0.11 },
  { year: 2013, temp: 0.08 }, { year: 2014, temp: -0.23 },
  { year: 2015, temp: -0.06 }, { year: 2016, temp: 0.53 },
  { year: 2017, temp: 0.35 }, { year: 2018, temp: 0.19 },
  { year: 2019, temp: 0.50 }, { year: 2020, temp: 0.58 },
  { year: 2021, temp: 0.74 }, { year: 2022, temp: 0.62 },
  { year: 2023, temp: 1.10 }
];

// === Create chart ===
function renderChart() {
  d3.select("svg").remove(); // clear previous chart

  const margin = { top: 80, right: 60, bottom: 80, left: 80 },
        width = window.innerWidth - margin.left - margin.right,
        height = window.innerHeight - margin.top - margin.bottom;

  const svg = d3.select("body")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", `translate(${margin.left},${margin.top})`);

  const x = d3.scaleBand()
    .domain(data.map(d => d.year))
    .range([0, width])
    .padding(0.15);

  const yMax = d3.max(data, d => Math.abs(d.temp)) * 1.2;
  const y = d3.scaleLinear()
    .domain([-yMax, yMax])
    .range([height, 0]);

  const color = d3.scaleSequential()
    .domain([yMax, -yMax]) // warmer = red, colder = blue
    .interpolator(d3.interpolateRdBu);

  // Axes
  svg.append("g")
    .attr("transform", `translate(0,${height/2})`)
    .call(d3.axisBottom(x).tickValues(x.domain().filter((d, i) => !(i % 2))))
    .selectAll("text")
    .attr("transform", "rotate(-45)")
    .style("text-anchor", "end");

  svg.append("g")
    .call(d3.axisLeft(y));

  // Grid lines
  svg.append("g")
    .attr("class", "grid")
    .call(d3.axisLeft(y)
      .tickSize(-width)
      .tickFormat("")
    )
    .attr("stroke-opacity", 0.2);

  // Bars
  svg.selectAll(".bar")
    .data(data)
    .enter()
    .append("rect")
    .attr("x", d => x(d.year))
    .attr("width", x.bandwidth())
    .attr("y", d => d.temp >= 0 ? y(d.temp) : y(0))
    .attr("height", d => Math.abs(y(d.temp) - y(0)))
    .attr("fill", d => color(d.temp));

  // Title
  svg.append("text")
    .attr("x", width / 2)
    .attr("y", -30)
    .attr("class", "title")
    .text("Sea Surface Temperature Changes (1979–2023)");

  // Axis labels
  svg.append("text")
    .attr("x", width / 2)
    .attr("y", height + 60)
    .attr("text-anchor", "middle")
    .text("Year");

  svg.append("text")
    .attr("transform", "rotate(-90)")
    .attr("x", -height / 2)
    .attr("y", -50)
    .attr("text-anchor", "middle")
    .text("Sea Temperature (°C)");

  // Tooltip
  const tooltip = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("opacity", 0);

  svg.selectAll("rect")
    .on("mouseover", (event, d) => {
      tooltip.transition().duration(150).style("opacity", 1);
      tooltip.html(`<b>${d.year}</b>
${d.temp.toFixed(2)} °C`)
        .style("left", (event.pageX + 10) + "px")
        .style("top", (event.pageY - 28) + "px");
    })
    .on("mouseout", () => tooltip.transition().duration(200).style("opacity", 0));
}

// Initial render
renderChart();

// Redraw on window resize
window.addEventListener("resize", renderChart);
</script>

</body>
</html>
 